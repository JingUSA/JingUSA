"0","library(tidyverse)"
"0","library(GGally)"
"0","library(scales)"
"0",""
"0","options(scipen = 999)  # 关掉科学计数法 (2e+05 -> 200,000)"
"0",""
"0","# 读数据"
"0","owidall <- read.csv(""https://github.com/owid/covid-19-data/raw/master/public/data/owid-covid-data.csv"")"
"0","owidall <- owidall[!grepl(""^OWID"", owidall$iso_code), ]"
"0","owideu  <- subset(owidall, continent == ""Europe"")"
"0",""
"0","eu_latest <- owideu %>%"
"0","  group_by(location) %>%"
"0","  slice_tail(n = 1) %>%"
"0","  ungroup()"
"0",""
"0","vars <- c(""total_cases_per_million"","
"0","          ""total_deaths_per_million"","
"0","          ""gdp_per_capita"","
"0","          ""life_expectancy"")"
"0",""
"0","eu_plot <- eu_latest %>% select(all_of(vars)) %>% drop_na()"
"0","colnames(eu_plot) <- c(""Cases/mil"", ""Deaths/mil"", ""GDPpc"", ""LifeExp"")"
"0",""
"0","# 自定义下三角散点 & 对角线直方图（带“正常数字”坐标）"
"0","my_points <- function(data, mapping, ...){"
"0","  ggplot(data = data, mapping = mapping) +"
"0","    geom_point(alpha = 0.7, size = 1.5) +"
"0","    scale_x_continuous(labels = label_number(big.mark = "",""), breaks = pretty_breaks(3)) +"
"0","    scale_y_continuous(labels = label_number(big.mark = "",""), breaks = pretty_breaks(3))"
"0","}"
"0","my_hist <- function(data, mapping, ...){"
"0","  ggplot(data = data, mapping = mapping) +"
"0","    geom_histogram(bins = 20, fill = ""grey70"", color = ""white"") +"
"0","    scale_x_continuous(labels = label_number(big.mark = "",""), breaks = pretty_breaks(3))"
"0","}"
"0",""
"0","ggpairs("
"0","  eu_plot,"
"0","  lower = list(continuous = my_points),"
"0","  diag  = list(continuous = my_hist),"
"0","  upper = list(continuous = wrap(""cor"", size = 4)),"
"0","  title = ""Scatterplot Matrix (Europe)"""
"0",")"
